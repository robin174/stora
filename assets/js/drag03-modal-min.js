console.log("API URL being used:",wpData.api_url),document.addEventListener("DOMContentLoaded",(async()=>{const t=document.querySelectorAll(".col"),e={1:"Cloud",2:"Decentralized",3:"On-Prem"};let a=[];function n(t,a,n){const c=function(t){let e="<select>";return e+='<option value="0">Please select</option>',t.forEach((t=>{e+=`<option value="${t}">${t}</option>`})),e+="</select>",e}(a.map((t=>t.provider)));t.dataset.value="0",t.innerHTML=`\n            <h3 class="provider">Select a provider</h3>\n            <h4 class="cost">$0 / TB download</h4>\n            ${c}\n            <div>\n                <label for="quantity-${t.dataset.card}">Quantity (TB):</label>\n                <input type="number" id="quantity-${t.dataset.card}" class="quantity-input" min="0" value="1">\n            </div>\n            <p class="calculated-cost">Calculated Cost: $0</p>\n        `;const l=t.querySelector("select"),d=t.querySelector(".quantity-input"),s=t.querySelector(".calculated-cost");l.addEventListener("change",(c=>{const l=c.target.value;if("0"===l)t.dataset.value="0",t.querySelector("h3.provider").textContent="Select a provider",t.querySelector("h4.cost").textContent="$0 / TB download",r(d,0,s);else{const o=a.find((t=>t.provider===l));o&&(t.dataset.value=o.price,t.querySelector("h3.provider").textContent=`${o.provider} - ${e[n]}`,t.querySelector("h4.cost").textContent=`$${o.price} / TB download`,r(d,o.price,s))}o()})),d.addEventListener("input",(()=>{const e=parseInt(t.dataset.value,10)||0;r(d,e,s),o()}))}function r(t,e,a){const n=(parseInt(t.value,10)||0)*e;a.textContent=`Calculated Cost: $${n}`}function o(){for(const[t,a]of Object.entries(e)){const e=document.querySelectorAll(`.col[data-column="${t}"] .card`);let n=0;e.forEach((t=>{const e=t.querySelector(".quantity-input"),a=parseInt(e?.value,10)||0,r=parseInt(t.dataset.value,10)||0;n+=a*r}));document.getElementById(`total-column-${t}`).textContent=`${a} cost: $${n}`}}function c(t){t.preventDefault()}function l(t){t.preventDefault();const r=t.dataTransfer.getData("text/plain"),c=document.querySelector(`.card[data-card="${r}"]`),l=t.currentTarget.dataset.column,d=e[l];t.currentTarget.appendChild(c);n(c,a.filter((t=>t.type===d)),l),o()}console.log("Fetching from API URL:",wpData.api_url),t.forEach((t=>{t.addEventListener("dragover",c),t.addEventListener("drop",l)})),document.querySelectorAll(".card").forEach((t=>{t.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",t.dataset.card)}))})),await async function(){a=await async function(){try{const t=await fetch(wpData.api_url);if(!t.ok)throw new Error("Failed to fetch data from API");return a=await t.json(),a}catch(t){return console.error(t.message),[]}}(),t.forEach((t=>{const r=t.dataset.column,o=e[r],c=a.filter((t=>t.type===o));t.querySelectorAll(".card").forEach((t=>{n(t,c,r)}))})),o()}()}));